<!-- HTML header for doxygen 1.8.7-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.7"/>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="pdltools_extra.css" rel="stylesheet" type="text/css"/>
<!-- Google Analytics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-47128600-1', 'auto');
    ga('send', 'pageview');
</script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="pdl.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">PDL Tools
   &#160;<span id="projectnumber">1.8</span>
   </div>
   <div id="projectbrief">User Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.7 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="gettingstarted.html"><span>Getting&#160;Started</span></a></li>
      <li><a href="installpage.html"><span>Installation</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="changelog.html"><span>Change&#160;Log</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Groups</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">normalize (Pseudo-window-function)<div class="ingroups"><a class="el" href="group__grp__sugar__funcs.html">SUgAR Pseudofunctions</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><b>Contents</b> </p><ul>
<li class="level1">
<a href="#normalize_syntax">Syntax</a> </li>
<li class="level1">
<a href="#normalize_usage">Usage</a> </li>
<li class="level1">
<a href="#normalize_example">Example</a> </li>
</ul>
</div><dl class="section user"><dt>About</dt><dd>A pseudo-window-function used to take all column values and map them, via a linear transformation, so that the column minimum is mapped to 0 and the column maximum is mapped to 1. If a window is specified, minima and maxima are calculated separately for each window.</dd></dl>
<p><a class="anchor" id="normalize_syntax"></a></p><dl class="section user"><dt>Syntax</dt><dd><pre class="syntax">
normalize(x)
</pre> Linear transform to make \(\min(x)\) match 0 and \(\max(x)\) match 1.</dd></dl>
<pre class="syntax">
normalize(x,w)
</pre><p> <code>normalize(<em>x</em>)</code> over window <em>w</em>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">x</td><td>Value to be normalized. </td></tr>
    <tr><td class="paramname">w</td><td>Window.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The normalized value, of type NUMERIC.</dd></dl>
<p><a class="anchor" id="normalize_usage"></a></p><dl class="section user"><dt>Usage</dt><dd>The pseudo-window-function calculates for each window its minimum and maximum (or for the entire column, if no window is specified) and determines the linear transform that will map the minimum value to 0 and the maximum value to 1. It then applies this transformation to each row in the window.</dd></dl>
<p><a class="anchor" id="normalize_example"></a></p><dl class="section user"><dt>Examples</dt><dd><pre class="fragment">user=# SELECT sugar($$
user$#   CREATE TABLE outtable AS
user$#     SELECT x,
user$#            normalize(x) AS col_normalize,
user$#            normalize(x,PARTITION BY x%3) AS win_normalize
user$#     FROM generate_series(0,10) x
user$#     DISTRIBUTED RANDOMLY;
user$# $$);
 sugar 
-------
 
(1 row)

user=# SELECT * FROM outtable ORDER BY x;
 x  |     col_normalize      |     win_normalize      
----+------------------------+------------------------
  0 | 0.00000000000000000000 | 0.00000000000000000000
  1 | 0.10000000000000000000 | 0.00000000000000000000
  2 | 0.20000000000000000000 | 0.00000000000000000000
  3 | 0.30000000000000000000 | 0.33333333333333333333
  4 | 0.40000000000000000000 | 0.33333333333333333333
  5 | 0.50000000000000000000 | 0.50000000000000000000
  6 | 0.60000000000000000000 | 0.66666666666666666667
  7 | 0.70000000000000000000 | 0.66666666666666666667
  8 | 0.80000000000000000000 | 1.00000000000000000000
  9 | 0.90000000000000000000 | 1.00000000000000000000
 10 | 1.00000000000000000000 | 1.00000000000000000000
(11 rows)
</pre></dd></dl>
<p>Column <code>'col_noramlize'</code> produced by the query reflects normalized values for the values 0 through 10, these having been scaled down by a factor of 10 to fit the interval \([0,1]\). By contrast, in column <code>'win_normalize'</code> a distinct transform is applied within each partition (where partitions are determined by the value of <code>'x%3'</code>). So, for example, <code>{2,5,8}</code> form one part, with a minimum of 2 and a maximum of 8. Normalizing according to these values results in <code>{0,0.5,1}</code>, respectively.</p>
<dl class="section note"><dt>Note</dt><dd>Columns that are <code>normalize</code> outputs should be named. Otherwise, their names will reflect internals of the SUgAR implementation, and may cause multiple columns to be assigned the same name, which would result in a SQL error.</dd></dl>
<p>(Written by <a href="#" onclick="location.href='mai'+'lto:'+'mbr'+'an'+'d@p'+'iv'+'ota'+'l.'+'io'; return false;">Michael Brand</a>, 3 Mar 2013.) </p>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.nl/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.7
</small></address>
</body>
</html>
