<!-- HTML header for doxygen 1.8.7-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.7"/>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="pdltools_extra.css" rel="stylesheet" type="text/css"/>
<!-- Google Analytics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-47128600-1', 'auto');
    ga('send', 'pageview');
</script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="pdl.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">PDL Tools
   &#160;<span id="projectnumber">1.8</span>
   </div>
   <div id="projectbrief">User Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.7 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="gettingstarted.html"><span>Getting&#160;Started</span></a></li>
      <li><a href="installpage.html"><span>Installation</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="changelog.html"><span>Change&#160;Log</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Groups</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">kdtree_knn<div class="ingroups"><a class="el" href="group__grp__kdtree__and__knn.html">KD-tree</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><b>Contents</b> </p><ul>
<li class="level1">
<a href="#kdtree_knn_syntax">Syntax</a> </li>
<li class="level1">
<a href="#kdtree_knn_example">Example</a> </li>
</ul>
</div><dl class="section user"><dt>About</dt><dd>This function finds the k-nearest neighbours of a query point by searching through a pre-learned KD-tree (e.g. produced by <a class="el" href="group__grp__kdtree.html">kd_tree</a>). The hope is that most of the branches in the KD-tree can be eliminated from search. The function is intended for large-scale problems, e.g. finding nearest neighbours from millions of data points. For small- to medium- scale problems, a brute-force approach that compares distances between the query point to all the data may work well enough by leveraging the parallel computation capability of the Greenplum database. Also note that due to the "curse of dimensionality" problem with KD-tree, the function is more suitable for search in a low dimensional space (e.g. dimensionality of &lt; 10).</dd></dl>
<p><a class="anchor" id="kdtree_knn_syntax"></a></p><dl class="section user"><dt>Syntax</dt><dd><pre class="syntax">
FUNCTION kdtree_knn(training_data_tab TEXT, id TEXT, dimension TEXT, val TEXT, kdtree_tab TEXT, query_point FLOAT8[], k INT)
RETURNS kdtree_knn_result;
</pre></dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">training_data_tab</td><td>Table that contains the data that was used for the construction of the KD-tree. </td></tr>
    <tr><td class="paramname">id</td><td>Name of the column specifying data IDs. </td></tr>
    <tr><td class="paramname">dimension</td><td>Name of the column specifying dimension indices. </td></tr>
    <tr><td class="paramname">val</td><td>Name of the column containing data values. </td></tr>
    <tr><td class="paramname">kdtree_tab</td><td>Table that specifies the KD-tree. </td></tr>
    <tr><td class="paramname">query_point</td><td>Query point. </td></tr>
    <tr><td class="paramname">k</td><td>Number of nearest neighbours to search for. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A data structure that contains the IDs of the k-nearest neighbours of the query point and the corresponding distances to those neighbours.</dd></dl>
<dl class="section user"><dt>Syntax</dt><dd>The above function finds the k-nearest neighbours of a single query point. One can use the following function to handle multiple queries. <br />
<pre class="syntax">
FUNCTION kdtree_knn(training_data_tab TEXT, id TEXT, dimension TEXT, val TEXT, kdtree_tab TEXT, 
                    query_tab TEXT, query_id TEXT, query_point TEXT, k INT, result_tab TEXT)
RETURNS VOID;
</pre></dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">training_data_tab</td><td>Table that contains the data that was used for the construction of the KD-tree. </td></tr>
    <tr><td class="paramname">id</td><td>Name of the column specifying data IDs. </td></tr>
    <tr><td class="paramname">dimension</td><td>Name of the column specifying dimension indices. </td></tr>
    <tr><td class="paramname">val</td><td>Name of the column containing data values. </td></tr>
    <tr><td class="paramname">kdtree_tab</td><td>Table that specifies the KD-tree. </td></tr>
    <tr><td class="paramname">query_tab</td><td>Table that contains the query points. </td></tr>
    <tr><td class="paramname">query_id</td><td>Name of the column specifying query point IDs. </td></tr>
    <tr><td class="paramname">query_point</td><td>Name of the column specifying query points. </td></tr>
    <tr><td class="paramname">k</td><td>Number of nearest neighbours to search for. </td></tr>
    <tr><td class="paramname">result_tab</td><td>Name of table that contains the search result.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__grp__kdtree.html">kd_tree</a> for building a KD-tree.</dd></dl>
<p><a class="anchor" id="kdtree_knn_example"></a></p><dl class="section user"><dt>Examples</dt><dd></dd></dl>
<p>See <a class="el" href="group__grp__kdtree.html">kd_tree</a> for a usage example. </p>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.nl/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.7
</small></address>
</body>
</html>
