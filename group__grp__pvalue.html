<!-- HTML header for doxygen 1.8.7-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.7"/>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="pdltools_extra.css" rel="stylesheet" type="text/css"/>
<!-- Google Analytics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-47128600-1', 'auto');
    ga('send', 'pageview');
</script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="pdl.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">PDL Tools
   &#160;<span id="projectnumber">1.8</span>
   </div>
   <div id="projectbrief">User Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.7 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="gettingstarted.html"><span>Getting&#160;Started</span></a></li>
      <li><a href="installpage.html"><span>Installation</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="changelog.html"><span>Change&#160;Log</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Groups</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">pvalue (Pseudo-window-function)<div class="ingroups"><a class="el" href="group__grp__sugar__funcs.html">SUgAR Pseudofunctions</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><b>Contents</b> </p><ul>
<li class="level1">
<a href="#pvalue_syntax">Syntax</a> </li>
<li class="level1">
<a href="#pvalue_usage">Usage</a> </li>
<li class="level1">
<a href="#pvalue_example">Example</a> </li>
</ul>
</div><dl class="section user"><dt>About</dt><dd>A pseudo-window-function, calculating for each element the probability of receiving an element lower than it, given that the element was allotted from a normal distribution, and given that the expectation and variance of this distribution are the mean and the squared standard deviation of the other values in the same column (or within the same window, if one is specified).</dd></dl>
<p><a class="anchor" id="pvalue_syntax"></a></p><dl class="section user"><dt>Syntax</dt><dd><pre class="syntax">
pvalue(x)
</pre> probability of lower value given normal distribution, calculated from <code>zscore(<em>x</em>)</code>. <pre class="syntax">
pvalue(x,w)
</pre> <code>pvalue(<em>x</em>)</code> over window <em>w</em>.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">x</td><td>Column of values. </td></tr>
    <tr><td class="paramname">w</td><td>Window.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The pvalue of <em>x</em>, as a <code>DOUBLE PRECISION</code> number.</dd></dl>
<p><a class="anchor" id="pvalue_usage"></a></p><dl class="section user"><dt>Usage</dt><dd>The pseudo-window-function calculates for the column of <em>x</em> values (or for the <em>x</em> values that are within a given window, <em>w</em>, if such a window is specified) their mean and standard deviation. It then returns, for each <em>x</em> value, the probability of receiving a value smaller than it if all values within the column (or window) were allotted from a single normal distribution, and if that distribution's expectation and variance were the sample's mean and squared standard deviation, respectively.</dd></dl>
<p><a class="anchor" id="pvalue_example"></a></p><dl class="section user"><dt>Examples</dt><dd><pre class="fragment">user=# SELECT sugar($$
user$#   CREATE TABLE outtable AS
user$#     SELECT x,
user$#            pvalue(x) AS col_pvalue,
user$#            pvalue(x,PARTITION BY x%3) AS win_pvalue
user$#     FROM generate_series(1,10) x
user$#     DISTRIBUTED RANDOMLY;
user$# $$);
 sugar 
-------
 
(1 row)

user=# SELECT * FROM outtable ORDER BY x;
 x  |     col_pvalue     |    win_pvalue     
----+--------------------+-------------------
  1 | 0.0685997502074812 | 0.122639058403386
  2 |  0.123838133845947 | 0.158655253931457
  3 |  0.204480671018437 | 0.158655253931457
  4 |   0.31014700767458 | 0.349267679151669
  5 |  0.434415098462657 |               0.5
  6 |  0.565584901537343 |               0.5
  7 |   0.68985299232542 | 0.650732320848331
  8 |  0.795519328981563 | 0.841344746068543
  9 |  0.876161866154053 | 0.841344746068543
 10 |  0.931400249792519 | 0.877360941596614
(10 rows)
</pre></dd></dl>
<p>Column <code>'col_pvalue'</code> produced by the query reflects p-values for the values 1 through 10 based on their mean and standard deviation. The values are monotone rising from roughly 0.07 (1.5 standard deviations below the mean, which is at 5.5) to the complementary probability, roughly 1-0.07=0.93 (1.5 standard deviations above the column mean). By contrast, in column <code>'win_pvalue'</code> the means and standard deviations are estimated separately within each partition (where partitions are determined by the value of <code>'x%3'</code>). So, for example, <code>{2,5,8}</code> form one part, with a mean of 5 and a standard deviation of 3. Normalizing according to these values, the p-values for these are <code>{~0.16,0.5,~0.84}</code>, respectively, or, equivalently, <code>{-1,0,1}</code> standard deviations from the mean.</p>
<dl class="section note"><dt>Note</dt><dd>Columns that are pvalue outputs should be named. Otherwise, their names will reflect internals of the SUgAR implementation, and may cause multiple columns to be assigned the same name, which would result in a SQL error.</dd></dl>
<p>(Written by <a href="#" onclick="location.href='mai'+'lto:'+'mbr'+'an'+'d@p'+'iv'+'ota'+'l.'+'io'; return false;">Michael Brand</a>, 3 Mar 2013.)</p>
<dl class="section user"><dt>Prerequisites</dt><dd>MADlib </dd></dl>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.nl/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.7
</small></address>
</body>
</html>
