<!-- HTML header for doxygen 1.8.7-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.7"/>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="pdltools_extra.css" rel="stylesheet" type="text/css"/>
<!-- Google Analytics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-47128600-1', 'auto');
    ga('send', 'pageview');
</script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="pdl.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">PDL Tools
   &#160;<span id="projectnumber">1.8</span>
   </div>
   <div id="projectbrief">User Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.7 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="gettingstarted.html"><span>Getting&#160;Started</span></a></li>
      <li><a href="installpage.html"><span>Installation</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="changelog.html"><span>Change&#160;Log</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Groups</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">complete_linkage<div class="ingroups"><a class="el" href="group__grp__clink.html">Complete Linkage</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><b>Contents</b> </p><ul>
<li class="level1">
<a href="#complete_linkage_syntax">Syntax</a> </li>
<li class="level1">
<a href="#complete_linkage_usage">Usage</a> </li>
<li class="level1">
<a href="#complete_linkage_example">Example</a> </li>
</ul>
</div><dl class="section user"><dt>About</dt><dd>This function implements the commonly used complete-linkage hierarchical clustering algorithm. It constructs a hierarchical clustering tree from bottom up by merging closest clusters. Complete-linkage clustering defines the distance between two clusters as the distance between the farthest pair of data points in the two clusters (<a href="https://en.wikipedia.org/wiki/Complete-linkage_clustering">https://en.wikipedia.org/wiki/Complete-linkage_clustering</a>). Given a hierarchical clustering tree, one can cut the tree at a certain height to obtain flat clusters of data points (cf. <a class="el" href="group__grp__cut__hclust__tree.html">cut_hclust_tree</a>).</dd></dl>
<p><a class="anchor" id="complete_linkage_syntax"></a></p><dl class="section user"><dt>Syntax</dt><dd><pre class="syntax">
FUNCTION complete_linkage(dist_tab TEXT, id1 TEXT, id2 TEXT, dist TEXT, output TEXT, stop_criterion TEXT, iter NUMERIC) 
RETURNS VOID;
</pre></dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dist_tab</td><td>Table that contains pairwise distances of data. It is sufficient to provide only the lower or upper triangular part of the distance matrix. </td></tr>
    <tr><td class="paramname">id1</td><td>ID column of data point 1 in <em>dist_tab</em>. </td></tr>
    <tr><td class="paramname">id2</td><td>ID column of data point 2 in <em>dist_tab</em>. </td></tr>
    <tr><td class="paramname">dist</td><td>Column of pairwise distances. (Missing rows are taken to have 0 distance.) </td></tr>
    <tr><td class="paramname">output</td><td>Name of the result table, containing the constructed hierarchical clustering tree. </td></tr>
    <tr><td class="paramname">stop_criterion</td><td>Stopping criterion used to stop the clustering. Use 'max_iter' to stop the clustering after a max number of iterations (NULL to build the entire clustering tree). Use 'threshold' to stop the clustering after the max distance between clusters reaches a threshold value. </td></tr>
    <tr><td class="paramname">iter</td><td>Value corresponding to the stop_criterion</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__grp__cut__hclust__tree.html" title="Cutting a hierarchical clustering tree at a certain height to obtain flat clusters. ">cut_hclust_tree</a> (for cutting the clustering tree to form flat clusters).</dd></dl>
<p><a class="anchor" id="complete_linkage_usage"></a></p><dl class="section user"><dt>Usage</dt><dd></dd></dl>
<p>This function operates on pairwise distances between data points. They are expected to be provided in a table of the following structure: <br />
</p><div class="fragment"><div class="line">TABLE/VIEW input_table</div>
<div class="line">(</div>
<div class="line">    ...</div>
<div class="line">    id1 INT, -- ID of point 1</div>
<div class="line">    id2 INT, -- ID of point 2</div>
<div class="line">    dist FLOAT8, -- distance between points 1 and 2</div>
<div class="line">    ...</div>
<div class="line">);</div>
</div><!-- fragment --><p>The distance measure is assumed to be non-negative and symmetric (but not necessarily a proper distance metric). Let \(A\) denote the distance matrix with \(A_{ij}\) being the distance between data points \(i\) and \(j\). It is sufficient to only provide non-zero entries in the lower or upper triangular part of \(A\). The obtained hierarchical clustering tree is saved in a user-specified output table. The output table is to be used as input to the cut_hclust_tree_complete() function to produce flat clusters.</p>
<p>The output is a table that specifies the constructed hierarchical clustering tree. It contains cluster IDs, members of clusters, IDs of immediate children clusters, and heights of clusters. This table is expected to be used as input to <a class="el" href="group__grp__cut__hclust__tree.html">cut_hclust_tree</a> to form flat clusters.</p>
<p>The output currently includes also a column called "active". This is only for internal use inside the <em>complete_linkage</em> function.</p>
<p><a class="anchor" id="complete_linkage_example"></a></p><dl class="section user"><dt>Examples</dt><dd></dd></dl>
<ol type="1">
<li>Create a test pairwise distance matrix <div class="fragment"><div class="line">CREATE TEMP TABLE complete_linkage_test_dist (id1 INT, id2 INT, dist FLOAT) DISTRIBUTED RANDOMLY;</div>
<div class="line"></div>
<div class="line">INSERT INTO complete_linkage_test_dist VALUES</div>
<div class="line">(1,2,0), </div>
<div class="line">(1,3,1),</div>
<div class="line">(1,4,5),</div>
<div class="line">(2,3,2),</div>
<div class="line">(2,4,4),</div>
<div class="line">(3,4,3);</div>
</div><!-- fragment --> <br />
</li>
<li>Build a hierarchical clustering tree <div class="fragment"><div class="line">SELECT pdltools.complete_linkage(<span class="stringliteral">&#39;complete_linkage_test_dist&#39;</span>,<span class="stringliteral">&#39;id1&#39;</span>,<span class="stringliteral">&#39;id2&#39;</span>,<span class="stringliteral">&#39;dist&#39;</span>,<span class="stringliteral">&#39;complete_linkage_test_output&#39;</span>,NULL);</div>
</div><!-- fragment --> <br />
</li>
<li>Cut the clustering tree at a certain height (2 in the example) to obtain flat clusters (see <a class="el" href="group__grp__cut__hclust__tree.html">cut_hclust_tree</a> for the usage of the <a class="el" href="complete__linkage_8sql__in.html#ac98a033b3b15df99f2879a8bd6707b9b" title="Cut the clustering tree produced by the complete_linkage() function at a certain height, and find the exemplar of each cluster. An exemplar is the data point which has the shortest average distance to its peers in the cluster. ">cut_hclust_tree()</a> function) <div class="fragment"><div class="line">SELECT pdltools.cut_hclust_tree(<span class="stringliteral">&#39;complete_linkage_test_dist&#39;</span>,<span class="stringliteral">&#39;id1&#39;</span>,<span class="stringliteral">&#39;id2&#39;</span>,<span class="stringliteral">&#39;dist&#39;</span>,<span class="stringliteral">&#39;complete_linkage_test_output&#39;</span>,2,<span class="stringliteral">&#39;complete_linkage_test_cluster&#39;</span>);</div>
</div><!-- fragment --> The <em>cluster_id</em> column in the output table <em>complete_linkage_test_cluster</em> indicates data assignment. <div class="fragment"><div class="line">SELECT * FROM complete_linkage_test_cluster;</div>
<div class="line"></div>
<div class="line"> cluster_id | member  | height | exemplar </div>
<div class="line">------------+---------+--------+----------</div>
<div class="line">          2 | {3,1,2} |      2 |        1</div>
<div class="line">          1 | {4}     |      0 |        4</div>
<div class="line">(2 rows)</div>
</div><!-- fragment --> </li>
</ol>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.nl/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.7
</small></address>
</body>
</html>
