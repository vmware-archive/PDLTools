<!-- HTML header for doxygen 1.8.7-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.7"/>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="pdltools_extra.css" rel="stylesheet" type="text/css"/>
<!-- Google Analytics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-47128600-1', 'auto');
    ga('send', 'pageview');
</script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="pdl.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">PDL Tools
   &#160;<span id="projectnumber">1.8</span>
   </div>
   <div id="projectbrief">User Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.7 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="gettingstarted.html"><span>Getting&#160;Started</span></a></li>
      <li><a href="installpage.html"><span>Installation</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="changelog.html"><span>Change&#160;Log</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Groups</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">glob (Pseudofunction)<div class="ingroups"><a class="el" href="group__grp__sugar__funcs.html">SUgAR Pseudofunctions</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><b>Contents</b> </p><ul>
<li class="level1">
<a href="#glob_syntax">Syntax</a> </li>
<li class="level1">
<a href="#glob_usage">Usage</a> </li>
<li class="level1">
<a href="#glob_example">Example</a> </li>
</ul>
</div><dl class="section user"><dt>About</dt><dd>Given a table, this SUgAR pseudofunction returns a list of its column names. It can be used for easily selecting multiple columns using a pattern.</dd></dl>
<p><a class="anchor" id="glob_syntax"></a></p><dl class="section user"><dt>Syntax</dt><dd><pre class="syntax">
glob(table,schema)
</pre> Return a comma-separated list of all the table's columns.</dd></dl>
<pre class="syntax">
glob(table,schema,incl_pat)
</pre><p> Same, but return only columns matching pattern.</p>
<pre class="syntax">
glob(table,schema,incl_pat,excl_pat)
</pre><p> Same, but futher exclude second pattern.</p>
<pre class="syntax">
glob(table,schema,incl_pat,excl_pat,sep)
</pre><p> Same, but use <em>sep</em> as the string separator, instead of a comma.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">table</td><td>The name of the table to glob from. </td></tr>
    <tr><td class="paramname">schema</td><td>The name of the schema the table resides in. </td></tr>
    <tr><td class="paramname">incl_pat</td><td>A string denoting a <code>'SIMILAR</code> TO' regex pattern to match. Defaults to <code>''</code> ("match every column"). </td></tr>
    <tr><td class="paramname">excl_pat</td><td>A string denoting a <code>'SIMILAR</code> TO' regex pattern to exclude. Defaults to '' ("exclude nothing"). Column names returned will match <em>incl_pat</em> but not <em>excl_pat</em>. </td></tr>
    <tr><td class="paramname">sep</td><td>A separator string to appear between column names. Defaults to comma separation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The set of retrieved columns. (This is not a valid return type in standard SQL.)</dd></dl>
<p><a class="anchor" id="glob_usage"></a></p><dl class="section user"><dt>Usage</dt><dd>This SUgAR pseudofunction is used to fetch the names of multiple table columns at once by use of patterns. Columns can also be excluded by a second pattern. This is especially important in analytics, where machine-learning training functions may require a large number of independent variable columns to be given as inputs.</dd></dl>
<dl class="section note"><dt>Note</dt><dd><ol type="1">
<li>Patterns are matched accoring to PostgreSQL <code>"SIMILAR TO"</code> rules.</li>
<li>Similar to the Unix method, if nothing matches, returns the original pattern.</li>
<li>The columns are fetched in the order that they would appear in a <code>'SELECT *'</code> from the original table.</li>
</ol>
</dd></dl>
<p><a class="anchor" id="glob_example"></a></p><dl class="section user"><dt>Examples</dt><dd><pre class="fragment">user=# CREATE TABLE wiki_table (region text, gender text, style text,
user(#                          ship_date date, units integer,
user(#                          price float8, cost float8, row_num integer)
user-# DISTRIBUTED BY (row_num);
CREATE TABLE
user=#
user=# INSERT INTO wiki_table VALUES
user-# ('East', 'Girl', 'Tee', '1/31/05', 12, 11.04, 10.42, 1),
user-# ('East', 'Boy', 'Golf', '4/30/05', 12, 13, 12.6, 2),
user-# (NULL , 'Boy', 'Tee', '3/31/05', 10, 11.96, 11.74, 3),
user-# ('West', 'Girl', 'Tee', '4/30/05', 12, 11.27, 10.56, 4),
user-# ('West', 'Girl', 'Fancy', '6/30/05', 11, 12.12, 11.95, 5),
user-# ('South', 'Boy', 'Fancy', '5/31/05', 15, 13.47, 13.33, 6),
user-# ('South', 'Girl', 'Golf', '1/31/05', 15, 11.44, 10.94, 7),
user-# ('North', 'Girl', 'Golf', '2/28/05', 12, 12.63, 11.73, 8),
user-# ('South', 'Girl', 'Fancy', '6/30/05', 10, 12.06, 11.51, 9),
user-# ('West', 'Boy', 'Tee', '2/28/05', 12, 13.42, 13.29, 10),
user-# ('East', 'Boy', 'Tee', '1/31/05', 11, 11.48, 10.67, 11)
user-# ;
INSERT 0 11
user=# -- Table data from Wikipedia 'pivoting' entry.
user=#
user=# SELECT sugar($$
user$#   CREATE TABLE pivot_table AS SELECT price,units,cost,row_num,
user$#     pivot01(region,wiki_table,null,null,all_but_one()),
user$#     pivot01(gender,wiki_table,null,null,all_but_one()),
user$#     pivot01(style,wiki_table,null,null,all_but_one())
user$#   FROM wiki_table
user$#   DISTRIBUTED BY (row_num);
user$# $$);
 sugar 
-------
 
(1 row)

user=# -- Note the use of 'all_but_one' to avoid colinear expressions.
user=#
user=# \x
Expanded display is on.
user=# SELECT * FROM pivot_table LIMIT 1;
-[ RECORD 1 ]+------
price        | 11.04
units        | 12
cost         | 10.42
row_num      | 1
region_north | 0
region_south | 0
region_west  | 0
region_none  | 0
gender_girl  | 1
style_fancy  | 0
style_tee    | 1

user=# \x
Expanded display is off.
user=#
user=# -- We now build a model based on the pivot-column dummy variables.
user=#
user=# SELECT sugar($$
user$#   CREATE TABLE model_table AS SELECT
user$#     (madlib.linregr(price,array[
user$#           glob('pivot_table','myschema','(region|gender|style)_%')
user$#       ])).*
user$#     FROM pivot_table
user$#   DISTRIBUTED RANDOMLY;
user$# $$);
 sugar 
-------
 
(1 row)

user=# \x
Expanded display is on.
user=# SELECT * FROM model_table;
-[ RECORD 1 ]+--------------------------------------------------------------------------------------------------------------------------------------
coef         | {11.6213333333333,8.08933333333334,3.42699999999999,2.37533333333333,1.00866666666667,5.34233333333334,9.58466666666667}
r2           | 0
std_err      | {1.63689950821671,1.25829466125607,1.20893040629839,1.63689950821671,0.923335849466016,1.25829466125607,0.923335849466016}
t_stats      | {7.09960096817058,6.42880684660802,2.83473720418124,1.45111738467139,1.09241579567175,4.24569339585408,10.3804771278075}
p_values     | {0.0020789843832798,0.00301045859193261,0.0471181875122522,0.22037157387082,0.33603325906707,0.0132033739658328,0.000486271930582483}
condition_no | 21.9542172021876

user=# \x
Expanded display is off.
user=#
user=# -- We now build a model based on all columns except the dependent
user=# -- variable and the row number.
user=#
user=# SELECT sugar($$
user$#   CREATE TABLE model_table2 AS SELECT
user$#     (madlib.linregr(price,array[
user$#           glob('pivot_table','myschema','%','price|row_num')
user$#       ])).*
user$#     FROM pivot_table
user$#   DISTRIBUTED RANDOMLY;
user$# $$);
 sugar 
-------
 
(1 row)

user=# \x
Expanded display is on.
user=# select * from model_table2;
-[ RECORD 1 ]+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------
coef         | {-0.0142837123125565,1.04130957661233,0.281204444710959,-0.0352315827156531,-0.352943629685487,-0.417010262886446,0.305638769377028,-0.111145474650055,0.294872956587369}
r2           | 0.973378808315947
std_err      | {0.0889950892127067,0.0919474625974511,0.458282603978408,0.402657364267115,0.291754108465693,0.417006883129105,0.230365118396282,0.382395764497836,0.296857342046528}
t_stats      | {-0.160500005549937,11.3250496228615,0.613604885434856,-0.0874976738095398,-1.20972976710279,-1.00000810479989,1.32675802441261,-0.290655611199072,0.993315356644109}
p_values     | {0.887233259077507,0.0077068431068974,0.60196716636129,0.938247879753775,0.349968878299479,0.422646611284083,0.315802891138953,0.798683313344773,0.425231263503929}
condition_no | 9683.22896325205
</pre></dd></dl>
<p>(Here, "madlib" is assumed to be the schema where MADlib is installed.)</p>
<p>Note that the order in which the columns appear in the glob (and therefore also the order of the coefficients) is the same as their order in the original table (the order they will appear in, in a <code>'SELECT *'</code>).</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__grp__all__but__one.html">all_but_one</a>, <a class="el" href="group__grp__format__glob.html" title="Glob the names of table columns and transform them. ">format_glob (Pseudofunction)</a></dd></dl>
<p>(Written by <a href="#" onclick="location.href='mai'+'lto:'+'mbr'+'an'+'d@p'+'iv'+'ota'+'l.'+'io'; return false;">Michael Brand</a>, 26 Jun 2014.) </p>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.nl/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.7
</small></address>
</body>
</html>
