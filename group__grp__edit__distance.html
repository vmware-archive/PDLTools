<!-- HTML header for doxygen 1.8.7-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.1.1"/>
<link href="$relpath^tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="$relpath^jquery.js"></script>
<script type="text/javascript" src="$relpath^dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="$relpath^doxygen.css" rel="stylesheet" type="text/css" />
$extrastylesheet
<!-- Google Analytics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-47128600-1', 'auto');
    ga('send', 'pageview');
</script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="$relpath^pdl.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">PDL Tools
   &#160;<span id="projectnumber">1.5</span>
   </div>
   <div id="projectbrief">User Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.1.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="gettingstarted.html"><span>Getting&#160;Started</span></a></li>
      <li><a href="installpage.html"><span>Installation</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="changelog.html"><span>Change&#160;Log</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Groups</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">edit_distance</div>  </div>
<div class="ingroups"><a class="el" href="group__grp__editdist.html">Edit Distance</a></div></div><!--header-->
<div class="contents">
<div class="toc"><b>Contents</b> </p>
<ul>
<li class="level1">
<a href="#edit_distance_syntax">Syntax</a> </li>
<li class="level1">
<a href="#edit_distance_usage">Usage</a> </li>
<li class="level1">
<a href="#edit_distance_example">Example</a> </li>
</ul>
</div><dl class="section user"><dt>About</dt><dd>A row function, taking two strings and calculating their edit distance. Costs for various edit operations, including the transposition of characters that are adjacent in both the input and output, are user-defined. This function is "safe" in the sense that it verifies certain assumptions about the user-defined costs and throws an exception if they do not hold true, rather than returning an erroneous value. See <a href="#edit_distance_usage">"Usage"</a> for a complete list of these assumptions.</dd></dl>
<p><a class="anchor" id="edit_distance_syntax"></a></p>
<dl class="section user"><dt>Syntax</dt><dd><pre class="syntax">
FUNCTION edit_distance(str1 text, str2 text,
                    ins_cost integer, del_cost integer, sub_cost integer,
                    tp_cost integer, final_tp_cost integer,
                    spec_sub_cost integer, spec_sub_from text, spec_sub_to text)
RETURNS integer;
</pre> <pre class="syntax">
FUNCTION edit_distance(str1 text, str2 text,
                    ins_cost integer, del_cost integer, sub_cost integer,
                    tp_cost integer, final_tp_cost integer)
RETURNS integer;
</pre> <pre class="syntax">
FUNCTION edit_distance(str1 text, str2 text,
                       ins_cost integer, del_cost integer, sub_cost integer,
                       tp_cost integer)
RETURNS integer;
</pre></dd></dl>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">str1,str2</td><td>The two strings to be compared. Edits make <em>str1</em> into <em>str2</em>. </td></tr>
    <tr><td class="paramname">ins_cost</td><td>Cost to insert a character. </td></tr>
    <tr><td class="paramname">del_cost</td><td>Cost to delete a character. </td></tr>
    <tr><td class="paramname">sub_cost</td><td>Cost to substitute a character by another. </td></tr>
    <tr><td class="paramname">tp_cost</td><td>Cost to transpose two adjacent characters. </td></tr>
    <tr><td class="paramname">final_tp_cost</td><td>Cost to transpose two adjacent characters, on the assumption that no other transformation occurs on these characters or anything between them throughout the editing process. </td></tr>
    <tr><td class="paramname">spec_sub_cost</td><td>Cost for special substitution. </td></tr>
    <tr><td class="paramname">spec_sub_from</td><td>String giving the "from" list for substitution of characters that receives special weighing <em>spec_sub_cost</em>. </td></tr>
    <tr><td class="paramname">spec_sub_to</td><td>String with "to" list corresponding to the previous "from".</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns:</dt><dd>The edit distance.</dd></dl>
<p><a class="anchor" id="edit_distance_usage"></a></p>
<dl class="section user"><dt>Usage</dt><dd>Given two strings, <em>str1</em> and <em>str2</em>, it is possible to transform the former into the latter by a sequence of edit operations such as insertion of a new character, deletion of an existing character, substitution of one character by another and transposition of the order of two adjacent characters.</dd></dl>
<p>Suppose that each one of these operations is associated with a cost (in the form of a nonnegative integer), then the cost of a sequence of operations can be measured as the sum of the costs of its individual parts.</p>
<p>There may be many sequences transforming <em>str1</em> to <em>str2</em>, each with its own cost. The minimum of these costs is called the "edit distance" from <em>str1</em> to <em>str2</em>.</p>
<p>The particular edit distance implementation given here allows each one of the operations discussed above to be assigned a cost. Furthermore, one can assign the following special costs:</p>
<ul>
<li><em>final_tp_cost</em> is the cost of transposing two adjacent characters, given that these characters are at no point involved in any other type of operation.</li>
<li><em>spec_sub_cost</em> is the cost of making a character-to-character substitution that is one of a special list of substitutions defined by <em>spec_sub_from</em> and <em>spec_sub_to</em>. A substitution is "special" if it takes the <em>i</em>'th character in <em>spec_sub_from</em> and transforms it to the <em>i</em>'th character in <em>spec_sub_to</em>. For example, if <code>spec_sub_from="OI"</code> and <code>spec_sub_to="01"</code>, then the list of special substitutions is the list of common character to numeral substitutions, namely the transformation of an <code>"O"</code> to a <code>"0"</code> and of an <code>"I"</code> to a <code>"1"</code>. Note that the list is directional and case sensitive. So, for example, the above does not cover <code>"o"</code>-to-<code>"0"</code> or <code>"0"</code>-to-<code>"O"</code> substitutions. If we had wanted to include these, they would have had to be added to the list explicitly.</li>
</ul>
<p>The function makes the following assumptions:</p>
<ul>
<li>All costs are assumed to be nonnegative.</li>
<li>\(\textit{final\_tp\_cost} \le \textit{tp\_cost}\).</li>
<li>\(\textit{ins\_cost}+\textit{del\_cost} \le 2\textit{final\_tp\_cost}\).</li>
<li>\(\max(\textit{sub\_cost},\textit{special\_sub\_cost}) \le \textit{final\_tp\_cost}\).</li>
</ul>
<p>When these assumptions are voided, an exception is thrown.</p>
<dl class="section note"><dt>Note:</dt><dd>Even though we use the term "distance", the result is not necessarily a distance metric. It is only a distance metric if all of the following conditions hold:<ol type="1">
<li>\(\textit{final\_tp\_cost} = \textit{tp\_cost}\);</li>
<li>\(\textit{ins\_cost} = \textit{del\_cost}\); and</li>
<li>the <code>spec_sub_from</code> and <code>spec_sub_to</code> lists are symmetric.</li>
</ol>
</dd></dl>
<p>The variants of <code>edit_distance</code> that accept less parameters are equivalent to the long-form <code>edit_distance</code>, except for the fact that some operations (such as special substitution) cannot be used. The user can reach the same effect (although, perhaps with reduced run-time efficiency) by assigning to these operations sufficiently high costs.</p>
<p>For example, a user can make sure that the only type of transpositions used are "final" transpositions by assigning to <em>tp_cost</em> the value <code>length(str1)*del_cost+length(str2)*ins_cost</code>. Because there is always an insertion-deletion path from <em>str1</em> to <em>str2</em> of that cost, assigning this as the cost for a single transposition ensures that the optimal path from <em>str1</em> to <em>str2</em> can always be found without any use of a non-final transpositon.</p>
<p><a class="anchor" id="edit_distance_example"></a></p>
<dl class="section user"><dt>Examples</dt><dd><pre class="fragment">user=# SELECT edit_distance('demerau','levenshtein',1,1,1,1,1,1,'01OIIL','OI01LI');

 edit_distance
---------------
             9
(1 row)
</pre></dd></dl>
<dl class="section see"><dt>See also:</dt><dd><a class="el" href="group__grp__edit__distance__unsafe.html" title="An edit distance calculator.">edit_distance_unsafe</a> </dd></dl>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.1.1
</small></address>
</body>
</html>
