<!-- HTML header for doxygen 1.8.7-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.7"/>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="pdltools_extra.css" rel="stylesheet" type="text/css"/>
<!-- Google Analytics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-47128600-1', 'auto');
    ga('send', 'pageview');
</script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="pdl.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">PDL Tools
   &#160;<span id="projectnumber">1.8</span>
   </div>
   <div id="projectbrief">User Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.7 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="gettingstarted.html"><span>Getting&#160;Started</span></a></li>
      <li><a href="installpage.html"><span>Installation</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="changelog.html"><span>Change&#160;Log</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Groups</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="contents">
<div class="textblock"><h2>Getting started with PDL Tools</h2>
<h3>Welcome to PDL Tools!</h3>
<p><b>PDL Tools</b> is Pivotal's library of reusable tools for use by data scientists and data engineers. Once installing it (as per the instructions at <a class="el" href="installpage.html">Installation</a>), your target database will have the library's objects installed in two separate schemas. One schema is for general <b>PDL Tools</b> objects such as utility functions and algorithms. Another is for a separate library, packaged with <b>PDL Tools</b>, called <b>SUgAR</b>. By default, <b>PDL Tools</b> objects are found in the <code>pdltools</code> schema, while <b>SUgAR</b> objects are in the <code>sugarlib</code> schema. Both of these values can be overridden during installation. Whichever schemas the libraries are installed in, it is highly recommended to place them on your path.</p>
<p><b>PDL Tools</b> is a library developed by Pivotal Data Labs data scientists, primarily for their own use. It is extended by aggregating into it code that was custom-built in customer lab engagements: at the end of Pivotal Data Science lab engagements, collateral is collected from what was built for the lab and assessed for its reusability potential. Code deemed reusable is reworked to fit with <b>PDL Tools</b> and contributed into the library. This ensures that the knowhow and methodologies accumulated over every past customer engagement are available to PDL data scientists in every new lab engagement, accelerating lab delivery and improving the quality of deliverables. It is also a method to share this knowhow and these methodologies with PDL customers.</p>
<p>Thus, <b>PDL Tools</b> is an always-evolving library, with new modules programmed and added into it all the time, as the need arises.</p>
<h3>What's in the box?</h3>
<p>Click on the <code>Modules</code> tab to see the contents of the library. At its top level, <b>PDL Tools</b> is composed of <code>Tools</code>, <code>Algorithms</code> and the SUgAR library.</p>
<p><a class="el" href="group__grp__tools__module.html">Tools</a> are work accelerators in the form of utility functions. Here you will find, for example, utilities for <a class="el" href="group__grp__anonymization.html">Anonymization</a> (masking personally identifiable information, while still keeping tables consistent and informative for research purposes), <a class="el" href="group__grp__sessionization.html">Sessionization</a> (segment streams of events based on time and key information) and more. Utilities can come also in the form of data types. For example, <b>PDL Tools</b> defines the complex data type, for storing and manipulating <a class="el" href="group__grp__complexnumbers.html">Complex Numbers</a>, which is useful in various types of analytics. In future, <b>PDL Tools</b> may include other types of work accelerators as well.</p>
<p><a class="el" href="group__grp__algorithms__module.html">Algorithms</a> are machine learning algorithms. Most machine learning algorithms used by Pivotal data scientists are part of the free MADlib library. <b>PDL Tools</b> includes algorithms that are not part of MADlib. One reason algorithms can get contributed to <b>PDL Tools</b> rather than MADlib is that <b>PDL Tools</b> works by the "release early, release often" methodology. PDL lab collateral which is contributed to <b>PDL Tools</b> is released as soon as it is ready. This ensures that Pivotal data scientists have in their arsenal the most up-to-date and most comprehensive set of tools possible.</p>
<p><a class="el" href="group__grp__sugar__module.html">SUgAR - Syntactic Upgrades for Analytics Routines</a> is an entire library, packaged within the PDL Tools library. <b>SUgAR</b> acknowledges that SQL was not designed with analytics in mind. Simple, commonly used analytics techniques such as pivoting cannot be supported in SQL. (In SQL, the output type of a query is determined by the query, not by the data it runs on, but in pivoting pivot-tables must be created whose column names and quantities depend on the data in the tables that are pivoted.) <b>SUgAR</b> bridges this gap between the desire to perform in-database analytics and the limitations of SQL by providing a thin layer of second-order parsing on top of SQL: it lets you write your queries as you would have liked to write them, send them to the function <a class="el" href="group__grp__sugar.html">sugar</a> as string parameters, and have <b>SUgAR</b> make them into one or more SQL queries, as is necessary, and run them for you. All heavy lifting is done in SQL, in the database, all syntax is familiar syntax, but some otherwise-impossible-to-attain features are magically supported.</p>
<p>An overview of <b>SUgAR</b>, what it contains and how to work with it can be found in <a class="el" href="group__grp__sugar__framework.html">The SUgAR Framework</a>. Examples of what it contains include fully-featured pivoting capabilities (<a class="el" href="group__grp__pivot.html">pivot (Pseudo-aggregate)</a>), the ability to define new window functions conveniently, with examples of window functions pre-defined in this way being Z-score, p-value, normalization and proportion calculation (see <a class="el" href="group__grp__sugar__funcs.html">SUgAR Pseudofunctions</a>).</p>
<h3>A SUgARy example</h3>
<p>To make the idea of SUgAR more concrete, here's an end-to-end example of what working with it looks like. We follow in this the example given <a class="el" href="group__grp__glob.html#glob_example">here</a>, where the full SQL code is also given.</p>
<p>In this example, we take a table describing shirt sales by region, gender and style and begin by dummy variable generation on it. This is the simplest form of pivoting, in which each categorical variable, such as region, gender and style, is made into multiple 0/1 indicator columns. The <b>SUgAR</b> function that performs this is <a class="el" href="group__grp__pivot01.html">pivot01 (Pseudofunction)</a>. Note, however, that if one creates dummy variables for every value taken by a categorical column, these column values will be, by definition, co-linear. For later analytics, it is often useful to ask <code>pivot01</code> to generate pivot columns for all values taken by the categorical column except one. <b>SUgAR</b>'s pivoting functions enable one to write modifiers that determine which columns are generated. For example, one can use <a class="el" href="group__grp__freq__vals.html">freq_vals</a>, one such modifier that comes built-in with <b>SUgAR</b>, to create pivoted columns for the <em>n</em> most frequent values in the original table's categorical column.</p>
<p>In this example, we used another built-in modifier: <a class="el" href="group__grp__all__but__one.html">all_but_one</a>. This simply chooses one value, arbitrarily, from the column values and omits it from the generated pivot table. (One can just as easily choose explicitly a column to omit, and this does not even require a modifier. An example of this can be found <a class="el" href="">here</a>.) The resulting query, essentially in the way that it is sent to <code>sugar()</code>, is</p>
<pre class="example">
SELECT price,units,cost,row_num,
     pivot01(region,wiki_table,null,null,all_but_one()),
     pivot01(gender,wiki_table,null,null,all_but_one()),
     pivot01(style,wiki_table,null,null,all_but_one())
FROM wiki_table;
</pre><p>It looks like a SQL query, it feels like a SQL query, but it supports pivoting capabilities impossible to attain in SQL.</p>
<p>The purpose of dummy-variable generation is to make data into numerical columns, which are handled more easily by machine learning algorithms. Continuing the example, we might therefore at this point want to to run some type of regression, for example MADlib's linear regression function, <code>madlib.linregr</code>. This function takes two parameters: a column to be the regression's independent column and an array of columns to be the dependent columns. In normal SQL, one would have had to populate this array manually, naming each one of the dependent columns separately. Here, the dummy variables alone form seven columns. In a real-world scenario, the number of columns can be much higher. In <b>SUgAR</b>, instead of enumerating over all values, we can simply select them all together by use of a regular expression, like so:</p>
<pre class="example">
glob('pivot_table','myschema','(region|gender|style)_%')
</pre><p>This is called column globbing, and is handled by <b>SUgAR</b>'s <code>glob</code> function. (See <a class="el" href="group__grp__glob.html">glob (Pseudofunction)</a>.) The function call selects all columns from <code>myschema.pivot_table</code> that match the pattern <code>'(region|gender|style)_%'</code>. This is the set of all our dummy variables, which were generated by expanding the <code>region</code>, <code>gender</code> and <code>style</code> columns. The complete call to the linear regression function now looks like this:</p>
<pre class="example">
SELECT (madlib.linregr(price,array[
           glob('pivot_table','myschema','(region|gender|style)_%')
       ])).*;
</pre><p>Globbing can also be used to de-select. Consider this, for example.</p>
<pre class="example">
SELECT (madlib.linregr(price,array[
           glob('pivot_table','myschema','%','price|row_num')
       ])).*;
</pre><p>This SELECT call is identical to the previous example, but instead of explicitly selecting all dummy variable columns, we're selecting all columns (<code>'%'</code>) except two columns that we want to omit: <code>price</code> and <code>row_num</code>. What to omit is also defined by a regular expression. In this case, <code>'price|row_num'</code>.</p>
<p>As you can see, we never actually needed to omit a column from the pivoting output at all. It would have been equally possible to simply de-select, using <code>glob</code>, the unwanted columns prior to sending them to further processing.</p>
<h3>Getting help</h3>
<p>There are many ways to get help when using <b>PDL Tools</b>. This manual is available in HTML, as an <a href="manual/pdltools-1.8-manual.tgz">HTML tar ball</a> and as a <a href="manual/pdltools-1.8-manual.pdf">PDF</a> file. This is to make sure help is always accessible to you, regardless of what your work environment is, even if it is a lab with no access to any outside network. Additionally, the library objects themselves provide online help: all <b>PDL Tools</b> and all <b>SUgAR</b> functions return a brief usage message if invoked without parameters or with the empty string as a parameter (unless this interferes with their normal behavior). Invoking a library function with the string <code>'usage'</code> gives the full usage instructions. For <b>SUgAR</b> pseudofunctions, use</p>
<pre class="example">
SELECT sugar('usage','<em>funcname</em>');
</pre><p>where <em>funcname</em> is the function to get usage instructions on. <code>sugar()</code> provides other methods of giving help to the user, for example by listing all supported <b>SUgAR</b> functions. See <a class="el" href="group__grp__sugar.html">sugar</a> for the complete set of options.</p>
<p>Lastly, note that <b>PDL Tools</b> and <b>SUgAR</b> manage their version numbers independently. To find out which version is installed on your machine</p>
<pre class="example">
SELECT <a class="el" href="udfs_8sql__in.html#a7721c5873a5c0fa8ed61c203a4b04a95">pdltools_version()</a>;
SELECT sugar_version();
</pre><p>or get them together by</p>
<pre class="example">
SELECT <a class="el" href="udfs_8sql__in.html#a853ba38559621b20487535fa663df094">version()</a>;
</pre><p>The page <a class="el" href="changelog.html">changelog</a> lists which features were added to the library at each version.</p>
<p>Enjoy the library! </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.nl/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.7
</small></address>
</body>
</html>
