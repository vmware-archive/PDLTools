<!-- HTML header for doxygen 1.8.7-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.7"/>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="pdltools_extra.css" rel="stylesheet" type="text/css"/>
<!-- Google Analytics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-47128600-1', 'auto');
    ga('send', 'pageview');
</script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="pdl.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">PDL Tools
   &#160;<span id="projectnumber">1.8</span>
   </div>
   <div id="projectbrief">User Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.7 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="gettingstarted.html"><span>Getting&#160;Started</span></a></li>
      <li><a href="installpage.html"><span>Installation</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="changelog.html"><span>Change&#160;Log</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Groups</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">format_glob (Pseudofunction)<div class="ingroups"><a class="el" href="group__grp__sugar__funcs.html">SUgAR Pseudofunctions</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><b>Contents</b> </p><ul>
<li class="level1">
<a href="#format_glob_syntax">Syntax</a> </li>
<li class="level1">
<a href="#format_glob_usage">Usage</a> </li>
<li class="level1">
<a href="#format_glob_example">Example</a> </li>
</ul>
</div><dl class="section user"><dt>About</dt><dd>Given a table, this SUgAR pseudofunction returns a list of its column names after a user-chosen transformation (which can be a general function). This can be used for easily selecting multiple columns using a pattern, and is more generic than <code>"glob"</code> in that it is useful, for example, where globbed columns require renaming.</dd></dl>
<p><a class="anchor" id="format_glob_syntax"></a></p><dl class="section user"><dt>Syntax</dt><dd><pre class="syntax">
format_glob(formatspec,table,schema)
</pre> Return a comma-separated list of all the table's columns after <em>formatspec</em> transformation.</dd></dl>
<pre class="syntax">
format_glob(formatspec,table,schema,incl_pat)
</pre><p> Same, but return only columns matching pattern.</p>
<pre class="syntax">
format_glob(formatspec,table,schema,incl_pat,excl_pat)
</pre><p> Same, but futher exclude second pattern.</p>
<pre class="syntax">
format_glob(formatspec,table,schema,incl_pat,excl_pat,sep)
</pre><p> Same, but use <em>sep</em> as the string separator, instead of a comma.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">formatspec</td><td>Specification of the transformation to be applied on the column names. The parameter can be either the name of a function accepting a string and returning a string or can be a (properly-quoted) string literal. If it is a string literal, it is used as a pattern: it is reproduced as-is, except for appearances of <code>'{c}'</code>, which are replaced by the names of the retrieved columns. If <em>formatspec</em> is the name of a function, this function is called for every column name, and the returned value is the function's output. Using NULL for formatspec will cause the original column names to appear in the output without undergoing any transformation. </td></tr>
    <tr><td class="paramname">table</td><td>The name of the table to glob from. </td></tr>
    <tr><td class="paramname">schema</td><td>The name of the schema the table resides in. </td></tr>
    <tr><td class="paramname">incl_pat</td><td>A string denoting a <code>'SIMILAR</code> TO' regex pattern to match. Defaults to <code>''</code> ("match every column"). </td></tr>
    <tr><td class="paramname">excl_pat</td><td>A string denoting a <code>'SIMILAR</code> TO' regex pattern to exclude. Defaults to '' ("exclude nothing"). Column names returned will match <em>incl_pat</em> but not <em>excl_pat</em>. </td></tr>
    <tr><td class="paramname">sep</td><td>A separator string to appear between column names. Defaults to comma separation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The set of retrieved columns. (This is not a valid return type in standard SQL.)</dd></dl>
<p><a class="anchor" id="format_glob_usage"></a></p><dl class="section user"><dt>Usage</dt><dd>This SUgAR pseudofunction is used to fetch the names of multiple table columns at once by use of patterns. Columns can also be excluded by a second pattern. This is especially important in analytics, where machine-learning training functions may require a large number of independent variable columns to be given as inputs.</dd></dl>
<dl class="section note"><dt>Note</dt><dd><ol type="1">
<li>Patterns are matched accoring to PostgreSQL <code>"SIMILAR TO"</code> rules.</li>
<li>Similar to the Unix method, if nothing matches, returns the original pattern.</li>
<li>The columns are fetched in the order that they would appear in a <code>'SELECT *'</code> from the original table.</li>
</ol>
</dd></dl>
<p><a class="anchor" id="format_glob_example"></a></p><dl class="section user"><dt>Examples</dt><dd><pre class="fragment">user=# CREATE TABLE public.test_table (y float8, x1 float8, x2 float8,
user(#                                 x3 float8)
user-#   DISTRIBUTED RANDOMLY;
CREATE TABLE
user=# INSERT INTO public.test_table VALUES
user-#   (5.1,3.3,10.0,-2.4);
INSERT 0 1
user=# CREATE FUNCTION test_function(text)
user-# RETURNS text
user-# STRICT
user-# IMMUTABLE
user-# LANGUAGE SQL
user-# AS $$
user$#   SELECT 'abs(' || $1 || ') AS "' || upper($1) || '"';
user$# $$;
CREATE FUNCTION
user=# SELECT sugarlib.sugar($$
user$#   CREATE TABLE outtable AS
user$#     SELECT y, glob('test_table','public','x%'),
user$#            format_glob('{c}*{c} AS {c}_sqr','test_table','public','x%'),
user$#            format_glob(test_function,'test_table','public','x%')
user$#     FROM public.test_table
user$#   DISTRIBUTED RANDOMLY;
user$# $$);
 sugar 
-------
 
(1 row)

user=# SELECT * FROM outtable;
  y  | x1  | x2 |  x3  | x1_sqr | x2_sqr | x3_sqr | X1  | X2 | X3  
-----+-----+----+------+--------+--------+--------+-----+----+-----
 5.1 | 3.3 | 10 | -2.4 |  10.89 |    100 |   5.76 | 3.3 | 10 | 2.4
(1 row)</pre></dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__grp__glob.html" title="Glob the names of table columns. ">glob (Pseudofunction)</a></dd></dl>
<p>(Written by <a href="#" onclick="location.href='mai'+'lto:'+'mbr'+'an'+'d@p'+'iv'+'ota'+'l.'+'io'; return false;">Michael Brand</a>, 10 Feb 2015.) </p>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.nl/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.7
</small></address>
</body>
</html>
